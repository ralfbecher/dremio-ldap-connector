metadata:
  # OpenLDAP JDBC-LDAP Bridge Driver ARP Configuration
  # https://www.openldap.org/jdbcldap/
  name: LDAPARP
  apiname: ldap
  spec_version: '1'

syntax:
  # The OpenLDAP JDBC-LDAP driver uses standard SQL-like syntax
  identifier_quote: '"'
  identifier_length_limit: 128
  allows_boolean_literal: false
  map_boolean_literal_to_bit: false
  supports_catalogs: false
  supports_schemas: false

data_types:
  mappings:
  # LDAP attributes are primarily strings, but the driver maps some types
  - source:
      name: "VARCHAR"
    dremio:
      name: "varchar"
    required_cast_arguments: "none"
  - source:
      name: "INTEGER"
    dremio:
      name: "integer"
    required_cast_arguments: "none"
  - source:
      name: "INT"
    dremio:
      name: "integer"
    required_cast_arguments: "none"
  - source:
      name: "BOOLEAN"
    dremio:
      name: "boolean"
    required_cast_arguments: "none"
  - source:
      name: "TIMESTAMP"
    dremio:
      name: "timestamp"
    required_cast_arguments: "none"

relational_algebra:
  # The OpenLDAP JDBC-LDAP driver has limited SQL support
  # Aggregations are handled by Dremio, not pushed down
  aggregation:
    enable: false
    group_by_ordinal: false
    distinct: false
    count_functions:
      count_star:
        enable: false
      count:
        enable: false
      count_distinct:
        enable: false
    functions: []

  except:
    enable: false
  project:
    enable: true
  join:
    # JOINs are not supported by the JDBC-LDAP driver
    # Dremio will handle joins locally
    enable: false
    cross:
      enable: false
    inner:
      enable: false
      inequality: false
    left:
      enable: false
      inequality: false
    right:
      enable: false
      inequality: false
    full:
      enable: false
      inequality: false
  sort:
    # Basic ORDER BY is supported
    enable: true
    order_by:
      enable: true
      default_nulls_ordering: high
    fetch_offset:
      offset_fetch:
        enable: false
      offset_only:
        enable: false
      fetch_only:
        enable: false
  union:
    enable: false
  union_all:
    enable: false
  values:
    enable: false
    method: values

# Describe the set of function signatures that are internally supported.
expressions:
  # The JDBC-LDAP driver has limited expression support
  # Most complex operations should be handled by Dremio
  subqueries:
    correlated: false
    scalar: false
    in_clause: false
  supports_case: false
  supports_over: false
  operators:
    # Basic comparison operators are supported
    - names:
      - "="
      - "!="
      - "<>"
      - ">"
      - ">="
      - "<"
      - "<="
      signatures:
      - args:
        - "varchar"
        - "varchar"
        return: "boolean"
      - args:
        - "integer"
        - "integer"
        return: "boolean"
    - names:
      - "not"
      signatures:
      - args:
        - "boolean"
        return: "boolean"
    # LIKE operator for pattern matching (maps to LDAP filters)
    - names:
      - "like"
      signatures:
      - args:
        - "varchar"
        - "varchar"
        return: "boolean"

  variable_length_operators:
    - names:
        - and
      variable_signatures:
        - return: boolean
          arg_type: boolean
    - names:
        - or
      variable_signatures:
        - return: boolean
          arg_type: boolean
